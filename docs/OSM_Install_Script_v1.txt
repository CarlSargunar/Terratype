https://switch2osm.org/serving-tiles/manually-building-a-tile-server-14-04/

ubuntu server 16.10

#-----------------
#---INSTALL


sudo apt-get install openssh-server
sudo apt-get install libboost-all-dev subversion git-core tar unzip wget bzip2 build-essential autoconf libtool libxml2-dev libgeos-dev libgeos++-dev libpq-dev libbz2-dev libproj-dev munin-node munin libprotobuf-c0-dev protobuf-c-compiler libfreetype6-dev libicu-dev libgdal-dev libcairo-dev libcairomm-1.0-dev apache2 apache2-dev libagg-dev liblua5.2-dev ttf-unifont lua5.1 liblua5.1-dev libgeotiff-epsg node-carto
sudo apt-get install libpng12-0
sudo apt-get install libtiff5-dev 
sudo apt-get install postgresql postgresql-contrib postgis postgresql-9.5-postgis-2.2
sudo apt-get install make cmake g++ libboost-dev libboost-system-dev libboost-filesystem-dev libexpat1-dev zlib1g-dev libbz2-dev libpq-dev libgeos-dev libgeos++-dev libproj-dev lua5.2 liblua5.2-dev

mkdir ~/src
cd ~/src
git clone git://github.com/openstreetmap/osm2pgsql.git
cd osm2pgsql
mkdir build && cd build 
cmake ..
make
sudo make install

cd ~/src
git clone git://github.com/mapnik/mapnik
cd mapnik
git branch 2.2 origin/2.2.x
git checkout 2.2

python scons/scons.py configure INPUT_PLUGINS=all OPTIMIZATION=3 SYSTEM_FONTS=/usr/share/fonts/truetype/
make
sudo make install
sudo ldconfig

python
import mapnik
#>>> #if mapnik has compiled then no errors are reported and the second set of chevrons are displayed
quit ()


NOTE: I tried the above python and it failed, so did this instead
   sudo add-apt-repository ppa:mapnik/nightly-2.0
   sudo apt-get update
   sudo apt-get install libmapnik-dev mapnik-utils python-mapnik



cd ~/src
git clone git://github.com/openstreetmap/mod_tile.git
cd mod_tile
./autogen.sh
./configure
make
sudo make install
sudo make install-mod_tile
sudo ldconfig


#-----------------
#---MAPS

sudo mkdir -p /usr/local/share/maps/style
cd /usr/local/share/maps/style
sudo wget https://github.com/mapbox/osm-bright/archive/master.zip
sudo wget http://data.openstreetmapdata.com/simplified-land-polygons-complete-3857.zip
sudo wget http://data.openstreetmapdata.com/land-polygons-split-3857.zip
sudo mkdir ne_10m_populated_places_simple
cd ne_10m_populated_places_simple
sudo wget http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_populated_places_simple.zip
sudo unzip ne_10m_populated_places_simple.zip
sudo rm ne_10m_populated_places_simple.zip
cd ..
sudo unzip '*.zip'
sudo mkdir osm-bright-master/shp
sudo mv land-polygons-split-3857 osm-bright-master/shp/
sudo mv simplified-land-polygons-complete-3857 osm-bright-master/shp/
sudo mv ne_10m_populated_places_simple osm-bright-master/shp/
cd osm-bright-master/shp/land-polygons-split-3857
sudo shapeindex land_polygons.shp
cd ../simplified-land-polygons-complete-3857/
sudo shapeindex simplified_land_polygons.shp
cd ../..
cd osm-bright
sudo rm osm-bright.osm2pgsql.mml
sudo wget https://raw.githubusercontent.com/Joniff/Terratype/master/docs/osm-bright.osm2pgsql.mml
cd ..
sudo wget https://raw.githubusercontent.com/Joniff/Terratype/master/docs/configure.py
sudo ./make.py
cd ..
sudo chmod -R 777 .
cd OSMBright/
sudo carto project.mml > OSMBright.xml
cd /usr/local/etc/
sudo rm renderd.conf
sudo wget https://raw.githubusercontent.com/Joniff/Terratype/master/docs/renderd.conf
sudo mkdir /usr/local/share/maps/planet
cd /usr/local/share/maps/planet 
sudo wget http://planet.openstreetmap.org/pbf/planet-latest.osm.pbf

#-----------------
#---WEBSERVER

sudo mkdir /var/run/renderd
sudo mkdir /var/lib/mod_tile
cd /etc/apache2/conf-available
sudo wget https://raw.githubusercontent.com/Joniff/Terratype/master/docs/mod_tile.conf
cd /etc/apache2/sites-available
sudo rm 000-default.conf
sudo wget https://raw.githubusercontent.com/Joniff/Terratype/master/docs/000-default.conf
sudo chown root:root 000-default.conf
sudo a2enconf mod_tile
sudo service apache2 reload

#-----------------
#---DATABASE

sudo -u postgres -i
createuser terratype_db
createdb -E UTF8 -O terratype_db gis
exit

sudo useradd -m terratype_db
sudo passwd terratype_db

# password set to  usual
sudo chown terratype_db /usr/local/share/maps/style
sudo chown terratype_db /usr/local/share/maps/planet
sudo chown terratype_db:root /var/run/renderd
sudo chown terratype_db:root /var/lib/mod_tile

sudo -u postgres psql
\c gis
CREATE EXTENSION postgis;
ALTER TABLE geometry_columns OWNER TO terratype_db;
ALTER TABLE spatial_ref_sys OWNER TO terratype_db;
\q

cd /etc/postgresql/9.5/main/
sudo rm pg_hba.conf
sudo wget https://raw.githubusercontent.com/Joniff/Terratype/master/docs/pg_hba.conf
sudo rm postgresql.conf
sudo wget https://raw.githubusercontent.com/Joniff/Terratype/master/docs/postgresql.conf
sudo chown postgres:postgres postgresql.conf
sudo service postgresql restart

#---------------------------
#---IMPORTING MAPS INTO DB

osm2pgsql --slim --create -C 16000 --number-processes 4 -U terratype_db -d gis /usr/local/share/maps/planet/planet-latest.osm.pbf

### Need to turn Autovac in postgresql.conf back on afterwards
